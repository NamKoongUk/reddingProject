#
#Mon May 27 05:11:08 KST 2019
selectProduct=SELECT * FROM PRODUCT WHERE CNO\=?
getPayment=SELECT R.UPNO, UP.USE_DATE, UP.USE_START_TIME, UP.USE_END_TIME,P.PNAME, M.MNAME,M.PHONE, P.PRICE,A.CHANGE_NAME,A.FILE_PATH,C.COM_TYPE FROM RESERVATION R JOIN USE_PRODUCT UP ON(R.UPNO \= UP.UPNO) JOIN PRODUCT P ON(P.PNO \= UP.PNO) JOIN MEMBER M ON(P.CNO \= M.MNO) JOIN ATTACHMENT A ON(P.CNO \= A.MNO) JOIN COMPANY C ON(A.MNO\=C.CNO) WHERE R.MNO \= ? AND A.CNO_DIV\='대표' AND R.UPNO IN(
UpdatePassword=UPDATE MEMBER SET MPWD \= ? WHERE MID \= ?
resUpdatePay=UPDATE RESERVATION SET RSTATUS \= 40 WHERE MNO\=? AND UPNO \=?
loginSelect=SELECT * FROM MEMBER WHERE MID\=? AND MPWD\=? AND STATUS\='Y'
deleteQna=DELETE FROM BOARD WHERE BID \= ?
memberDelete=UPDATE MEMBER SET STATUS \= 'N', OUT_DATE \= SYSDATE WHERE MID \= ?
listQnaCount=SELECT COUNT(*) FROM MEMBER M JOIN COMPANY C ON(M.MNO \= C.CNO) WHERE C.CNO\=?
selectAttachment=SELECT * FROM ATTACHMENT WHERE MNO\=?
getCouponList=SELECT CH.CHISTORY_CODE, C.COUPON_NAME,C.COUPON_CATEGORY, C.DISCOUNT_TYPE,C.DISCOUNT_AMOUNT,C.DISCOUNT_RATE,C.COUPON_STARTDATE,C.COUPON_ENDDATE  FROM COUPON_HISTORY CH JOIN COUPON C ON(CH.COUPON_CODE \= C.COUPON_CODE) WHERE CH.MNO \= ? AND CH.COUPON_STATUS \= '사용전' AND C.COUPON_ENDDATE > SYSDATE
selectMember=SELECT * FROM MEMBER WHERE MNO\=?
insertComQnaReply=INSERT INTO REPLY VALUES (SEQ_REPLY.NEXTVAL , SYSDATE , ? ,? , ? , NULL)
updateMember=UPDATE MEMBER SET MPWD\=?, NICK_NAME\=?, PHONE\=?, EMERGEN_CON\=?, EMAIL\=?, GENDER\=?, MODIFY_DATE\=SYSDATE WHERE MID\=?
selectMemberId=SELECT MID FROM MEMBER WHERE MNAME \= ? AND EMAIL \= ?
selectComList=SELECT RNUM, ORIGIN_NAME, CNO_DIV, MNO, CHANGE_NAME, FILE_PATH, COM_LIKE, MNAME, PRICE FROM (SELECT ROWNUM RNUM, ORIGIN_NAME, CNO_DIV, M.MNO, CHANGE_NAME, FILE_PATH, COM_LIKE, MNAME, PRICE FROM MEMBER M LEFT JOIN PRODUCT P ON (M.MNO \= P.CNO) JOIN COMPANY C ON (C.CNO \= M.MNO) LEFT JOIN ATTACHMENT A ON (M.MNO \= A.MNO) WHERE (M.MNO,P.PRICE) IN (SELECT CNO,MIN(PRICE) FROM PRODUCT GROUP BY CNO ) AND a.cno_div \= '대표' AND C.COM_TYPE \= ? ORDER BY P.PRICE ASC) WHERE RNUM BETWEEN ? AND ?
nickChecked=SELECT COUNT(*) FROM MEMBER WHERE NICK_NAME \= ?
selectCount=SELECT (SELECT COUNT(*) FROM RESERVATION R WHERE R.MNO \= ? AND R.RSTATUS \= 10) RESWAIT, (SELECT COUNT(*) FROM RESERVATION R WHERE R.MNO \= ? AND R.RSTATUS \= 20) PAYWAIT, (SELECT COUNT(*) FROM PAY_HISTORY PH WHERE PH.MNO\= ? AND PH.PAY_DIV \=?) FINAL FROM DUAL
memberInsertPay=INSERT INTO PAY_HISTORY VALUES(SEQ_PAYNO.NEXTVAL,?,?,?,SYSDATE,'카드','승인','결제',SYSDATE,?,DEFAULT,?)
selectBoard=SELECT RNUM, BID, BCONTENT, BDIVISION, BTITLE, MNAME, BDATE, CNO, REF_CNUM, REPLY_CODE, REPLY_DATE, REPLY_CONTENT, MNO, RB FROM( SELECT ROWNUM RNUM, B.BID, B.BCONTENT, B.BDIVISION, B.BTITLE, M.MNAME, B.BDATE, C.CNO, B.REF_CNUM, REPLY_CODE, R.REPLY_DATE, R.REPLY_CONTENT, R.MNO , R.BID RB FROM BOARD B JOIN COMPANY C ON(B.REF_CNUM \= C.CNO) JOIN MEMBER M ON(B.BWRITER \= M.MNO) LEFT JOIN REPLY R ON (B.BID \= R.BID) WHERE C.CNO \= ? AND B.BDIVISION \= '업체QnA' ORDER BY B.BDATE DESC) WHERE RNUM BETWEEN ? AND ?
selectCompany=SELECT * FROM COMPANY WHERE CNO\=?
couUpdatePay=UPDATE COUPON_HISTORY SET COUPON_STATUS \='사용완료' WHERE MNO \= ? AND CHISTORY_CODE \= ?
PasswordSelect=SELECT COUNT(*) FROM MEMBER WHERE MID \= ? AND MNAME \= ? AND EMAIL \= ?
dynamicQuery=SELECT RNUM,PAYNO,UPNO,APPROVAL,PNAME,RAPPLY,CNAME,FINAL_PRICE,PAYDIV,USE_DATE, USE_START_TIME, USE_END_TIME FROM(SELECT ROWNUM RNUM, PAYNO,FINAL_PRICE,UPNO,APPROVAL,PNAME,RAPPLY,CNAME,PAYDIV,USE_DATE, USE_START_TIME, USE_END_TIME FROM(SELECT PH.PAYNO PAYNO,FINAL_PRICE, PH.UPNO UPNO,PH.APPROVAL_DATE APPROVAL,P.PNAME PNAME,RAPPLY_DATE RAPPLY ,M.MNAME CNAME,PH.PAY_DIV PAYDIV,UP.USE_DATE USE_DATE,UP.USE_START_TIME USE_START_TIME, UP.USE_END_TIME USE_END_TIME FROM PAY_HISTORY PH JOIN USE_PRODUCT UP ON (PH.UPNO \= UP.UPNO) JOIN PRODUCT P ON (UP.PNO \= P.PNO) JOIN RESERVATION R ON (PH.UPNO \= R.UPNO AND PH.MNO \= R.MNO) JOIN MEMBER M ON(M.MNO \= P.CNO) WHERE PH.PAY_DIV \= ? AND PH.MNO \=  2  ORDER BY PH.APPROVAL_DATE DESC)) WHERE RNUM BETWEEN 1  AND 10
insertMember=INSERT INTO MEMBER VALUES(SEQ_MNO.NEXTVAL, ?, ?, ?, ?, ?, ?, ?, ?, ?, DEFAULT, DEFAULT, ? , null , default , null , ? )
listComCount=SELECT COUNT(*) FROM MEMBER M JOIN COMPANY C ON(M.MNO \= C.CNO) WHERE C.COM_TYPE\=?
memberIdSearch=SELECT COUNT(*) FROM MEMBER WHERE MNAME \= ? AND EMAIL \= ?
selectComQnaDetail=SELECT B.BID , B.BTITLE , B.BWRITER , M.MNAME, M.NICK_NAME , B.BDATE , B.BCONTENT , B.BCATEGORY , B.BDIVISION , B.BMODIFY_DATE , R.REPLY_CODE , R.REPLY_DATE , R.REPLY_CONTENT , R.MNO FROM BOARD B LEFT JOIN REPLY R ON(B.BID \= R.BID) JOIN MEMBER M ON(M.MNO \= B.BWRITER) WHERE B.BID \= ? ORDER BY R.REPLY_DATE DESC
getPackage=SELECT R.UPNO,R.RSTATUS,R.RAPPLY_DATE, P.PNAME, P.PRICE, M.MNAME FROM RESERVATION R JOIN USE_PRODUCT UP ON(R.UPNO \= UP.UPNO) JOIN PRODUCT P ON(UP.PNO \= P.PNO) JOIN MEMBER M ON(P.CNO \= M.MNO) WHERE SUBNO \= ? AND R.MNO \= ?
selectComReviewList=SELECT RNUM, BID, BTITLE, NICK_NAME, BDATE, BCOUNT, BDIVISION, BLIKE, CNO FROM( SELECT ROWNUM RNUM, B.BID, B.BTITLE, M.NICK_NAME, B.BDATE, B.BCOUNT, B.BDIVISION, B.BLIKE, C.CNO FROM BOARD B JOIN COMPANY C ON(B.REF_CNUM \= C.CNO) JOIN MEMBER M ON(B.BWRITER \= M.MNO) where C.CNO \= ? AND B.BDIVISION \= '업체후기' ORDER BY RNUM DESC) WHERE RNUM BETWEEN ? AND ?
